<div class="p-6">
  <h2 mat-dialog-title class="text-xl font-bold mb-4">Create Purchase Order</h2>
  
  <div mat-dialog-content class="mb-6">
    <!-- Item Information -->
    <div class="bg-gray-50 p-4 rounded-lg mb-4">
      <h3 class="font-semibold text-lg mb-2">{{data.suggestion.itemName}}</h3>
      <div class="grid grid-cols-2 gap-4 text-sm">
        <div>
          <span class="text-gray-600">Code:</span>
          <span class="font-medium">{{data.suggestion.itemCode}}</span>
        </div>
        <div>
          <span class="text-gray-600">Current Stock:</span>
          <span class="font-medium">{{data.suggestion.currentStock}}</span>
        </div>
        <div>
          <span class="text-gray-600">Reorder Point:</span>
          <span class="font-medium">{{data.suggestion.reorderPoint}}</span>
        </div>
        <div>
          <span class="text-gray-600">Lead Time:</span>
          <span class="font-medium">{{data.suggestion.leadTime}} days</span>
        </div>
      </div>
    </div>

    <!-- Purchase Order Form -->
    <form [formGroup]="reorderForm" class="space-y-4">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Quantity</mat-label>
        <input matInput type="number" formControlName="quantity" min="1">
        <mat-hint>Suggested: {{data.suggestion.suggestedQuantity}}</mat-hint>
        <mat-error *ngIf="reorderForm.get('quantity')?.hasError('required')">
          Quantity is required
        </mat-error>
        <mat-error *ngIf="reorderForm.get('quantity')?.hasError('min')">
          Quantity must be at least 1
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Supplier</mat-label>
        <input matInput formControlName="supplier">
        <mat-error *ngIf="reorderForm.get('supplier')?.hasError('required')">
          Supplier is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Expected Delivery Date</mat-label>
        <input matInput type="date" formControlName="expectedDeliveryDate">
        <mat-error *ngIf="reorderForm.get('expectedDeliveryDate')?.hasError('required')">
          Expected delivery date is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Notes</mat-label>
        <textarea matInput formControlName="notes" rows="3" placeholder="Additional notes for this purchase order..."></textarea>
      </mat-form-field>

      <mat-checkbox formControlName="urgent" class="mb-4">
        Mark as urgent order
      </mat-checkbox>
    </form>

    <!-- Cost Summary -->
    <div class="bg-blue-50 p-4 rounded-lg">
      <h4 class="font-semibold text-blue-900 mb-2">Cost Summary</h4>
      <div class="grid grid-cols-2 gap-4 text-sm">
        <div>
          <span class="text-blue-700">Quantity:</span>
          <span class="font-medium">{{reorderForm.get('quantity')?.value || 0}}</span>
        </div>
        <div>
          <span class="text-blue-700">Estimated Cost:</span>
          <span class="font-medium">{{formatCurrency(estimatedCost)}}</span>
        </div>
      </div>
    </div>
  </div>

  <div mat-dialog-actions class="flex justify-end space-x-2">
    <button mat-button (click)="onCancel()" [disabled]="loading">
      Cancel
    </button>
    <button mat-raised-button 
            color="primary" 
            (click)="onCreatePurchaseOrder()" 
            [disabled]="!reorderForm.valid || loading">
      <mat-icon *ngIf="loading" class="animate-spin">refresh</mat-icon>
      <span *ngIf="!loading">Create Purchase Order</span>
      <span *ngIf="loading">Creating...</span>
    </button>
  </div>
</div>
