<div class="sm:mx-8">
  <!-- Header with Search and Add Button -->
  <div class="m-3 flex flex-col md:flex-row justify-between items-start md:items-center gap-3"
    [@animate]="{value:'*',params:{y:'50px',delay:'300ms'}}">

    <!-- Search Bar for all routes -->
    <div class="w-full md:w-[100px] lg:w-1/3 xl:w-1/2 search-container" *ngIf="currentRoute === 'containers' || currentRoute === 'items' || currentRoute === 'clients' || currentRoute === 'suppliers'">
      <form [formGroup]="searchForm" class="flex flex-col sm:flex-row gap-3">
        <mat-form-field appearance="fill" class="w-full sm:w-96 lg:w-[500px] xl:w-[600px]">
          <mat-label>{{getSearchLabel()}}</mat-label>
          <input matInput formControlName="search">
          <mat-spinner *ngIf="loading" matSuffix diameter="20"></mat-spinner>
          <mat-icon *ngIf="!loading" matSuffix>search</mat-icon>
        </mat-form-field>
        
        <button mat-stroked-button type="button" (click)="toggleFilters()" class="h-14 px-6" *ngIf="currentRoute === 'containers' || currentRoute === 'items'">
          <mat-icon>filter_list</mat-icon>
          <span class="ml-2">Filters</span>
        </button>
      </form>
    </div>
    
    <!-- Empty div for other routes -->
    <div class="w-full md:w-[100px] lg:w-1/6 xl:w-2/6" *ngIf="currentRoute !== 'containers' && currentRoute !== 'items' && currentRoute !== 'clients' && currentRoute !== 'suppliers'"></div>
    
    <button mat-flat-button class="w-full sm:w-auto m-2" color="primary" (click)="openPopUp({}, true)">{{"ADD" | translate }}
      {{currentRoute === 'containers' ? 'Container' : currentRoute === 'items' ? 'Item' : currentRoute === 'clients' ? 'Client' : currentRoute === 'suppliers' ? 'Supplier' : 'Container'}}</button>
  </div>

  <!-- Advanced Filters (for containers and items) -->
  <div *ngIf="(currentRoute === 'containers' || currentRoute === 'items') && showFilters" class="m-3 p-6 filters-panel animate-slide-in"
    [@animate]="{value:'*',params:{y:'20px',delay:'100ms'}}">
    <div [formGroup]="searchForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Status Filter (for containers) -->
      <mat-form-field appearance="fill" *ngIf="currentRoute === 'containers'">
        <mat-label>Status</mat-label>
        <mat-select formControlName="status">
          <mat-option *ngFor="let status of statusOptions" [value]="status.value">
            {{status.label}}
          </mat-option>
        </mat-select>
        <mat-icon matSuffix>filter_alt</mat-icon>
      </mat-form-field>

      <!-- Min Price Filter (for items) -->
      <mat-form-field appearance="fill" *ngIf="currentRoute === 'items'">
        <mat-label>Min Price</mat-label>
        <input matInput type="number" formControlName="minPrice" step="0.01">
        <mat-icon matSuffix>attach_money</mat-icon>
      </mat-form-field>

      <!-- Max Price Filter (for items) -->
      <mat-form-field appearance="fill" *ngIf="currentRoute === 'items'">
        <mat-label>Max Price</mat-label>
        <input matInput type="number" formControlName="maxPrice" step="0.01">
        <mat-icon matSuffix>attach_money</mat-icon>
      </mat-form-field>

      <!-- Color Filter (for items) -->
      <mat-form-field appearance="fill" *ngIf="currentRoute === 'items'" class="color-filter-field">
        <mat-label>Color</mat-label>
        <input matInput type="text" formControlName="colorFilter"  autocomplete="off">
        <button
          mat-icon-button
          matSuffix
          type="button"
          *ngIf="searchForm.get('colorFilter')?.value"
          (click)="searchForm.get('colorFilter')?.setValue('')">
          <mat-icon>clear</mat-icon>
        </button>
      </mat-form-field>

      <!-- From Date -->
      <mat-form-field appearance="fill">
        <mat-label>From Date</mat-label>
        <input matInput [matDatepicker]="fromDatePicker" formControlName="fromDate">
        <mat-datepicker-toggle matSuffix [for]="fromDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #fromDatePicker></mat-datepicker>
      </mat-form-field>

      <!-- To Date -->
      <mat-form-field appearance="fill">
        <mat-label>To Date</mat-label>
        <input matInput [matDatepicker]="toDatePicker" formControlName="toDate">
        <mat-datepicker-toggle matSuffix [for]="toDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #toDatePicker></mat-datepicker>
      </mat-form-field>

      <!-- Sort By -->
      <mat-form-field appearance="fill">
        <mat-label>Sort By</mat-label>
        <mat-select formControlName="sortBy">
          <mat-option value="Ascending">
            <mat-icon>arrow_upward</mat-icon>
            <span class="ml-2">Ascending</span>
          </mat-option>
          <mat-option value="Descending">
            <mat-icon>arrow_downward</mat-icon>
            <span class="ml-2">Descending</span>
          </mat-option>
        </mat-select>
        <mat-icon matSuffix>sort</mat-icon>
      </mat-form-field>
    </div>

    <!-- Filter Actions -->
    <div class="flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200">
      <button mat-stroked-button (click)="clearFilters()" class="px-6">
        <mat-icon>clear</mat-icon>
        <span class="ml-2">Clear Filters</span>
      </button>
      <button mat-flat-button color="primary" (click)="applyFilters()" class="px-6">
        <mat-icon>search</mat-icon>
        <span class="ml-2">Apply Filters</span>
      </button>
    </div>
  </div>

  <!-- Desktop Table View -->
  <mat-card class="!p-0 hidden md:block shadow-lg relative" [@animate]="{value:'*',params:{y:'50px',delay:'300ms'}}">
    <!-- Loading Overlay -->
    <div *ngIf="loading" class="absolute inset-0 bg-white bg-opacity-80 flex justify-center items-center z-50 rounded-lg">
      <div class="flex flex-col items-center">
        <mat-spinner diameter="40"></mat-spinner>
        <span class="mt-3 text-gray-600 font-medium">Searching...</span>
      </div>
    </div>
    <mat-card-content class="!p-0">
      <div class="overflow-x-auto">
        <mat-table [dataSource]="dataSource" matSort class="w-full">
          <!-- Containers specific columns -->
          <ng-container matColumnDef="id" *ngIf="currentRoute === 'containers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> ID </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-medium"> {{row.id}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="code" *ngIf="currentRoute === 'containers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Code </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-mono text-sm"> {{row.code}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Name </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-medium"> {{row.name}} </mat-cell>
          </ng-container>

        <ng-container matColumnDef="type" *ngIf="currentRoute === 'containers'">
          <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Type </mat-header-cell>
          <mat-cell *matCellDef="let row" class="text-sm"> {{row.type}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="size" *ngIf="currentRoute === 'containers' || currentRoute === 'items'">
          <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Size </mat-header-cell>
          <mat-cell *matCellDef="let row" class="text-center">
            <ng-container *ngIf="currentRoute === 'containers'; else itemSizeCell">
              {{row.size}} ft
            </ng-container>
            <ng-template #itemSizeCell>
              <ng-container *ngIf="row.size; else noItemSize">
                <span class="font-medium uppercase">{{row.size}}</span>
              </ng-container>
            </ng-template>
            <ng-template #noItemSize>
              <span class="text-gray-400">—</span>
            </ng-template>
          </mat-cell>
        </ng-container>

          <ng-container matColumnDef="cbm" *ngIf="currentRoute === 'containers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> CBM </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-center"> {{row.cbm}} m³ </mat-cell>
          </ng-container>

          <ng-container matColumnDef="shipping_agency" *ngIf="currentRoute === 'containers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Shipping Agency </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.shipping_agency}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="container_price" *ngIf="currentRoute === 'containers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Container Price </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-semibold text-green-600"> ${{row.container_price | number:'1.2-2'}} </mat-cell>
          </ng-container>

          <!-- Items specific columns -->
          <ng-container matColumnDef="pictures" *ngIf="currentRoute === 'items'">
            <mat-header-cell *matHeaderCellDef class="font-semibold"> Pictures </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-center">
              <div class="flex justify-center items-center space-x-1">
                <img 
                  *ngFor="let picture of row.pictures; let i = index" 
                  [src]="picture" 
                  [alt]="row.name + ' image ' + (i + 1)"
                  class="w-8 h-8 rounded object-cover border border-gray-200 cursor-pointer hover:scale-110 transition-transform"
                  (click)="openImagePreview(picture, row.name)"
                  matTooltip="Click to view full size"
                />
                <span *ngIf="!row.pictures || row.pictures.length === 0" class="text-gray-400 text-xs">No images</span>
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="code" *ngIf="currentRoute === 'items'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Code </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-mono text-sm"> {{row.code}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="type" *ngIf="currentRoute === 'items'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Type </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.type}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="total_quantity" *ngIf="currentRoute === 'items'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Quantity </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-center"> {{row.total_quantity}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="final_price" *ngIf="currentRoute === 'items'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Final Price </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-semibold text-green-600"> ${{row.final_price | number:'1.2-2'}} </mat-cell>
          </ng-container>

          <!-- Clients specific columns -->
          <ng-container matColumnDef="email" *ngIf="currentRoute === 'clients'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Email </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.email}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="phone" *ngIf="currentRoute === 'clients'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Phone </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> 
              <div class="flex flex-col space-y-1">
                <span *ngIf="row.phone1">{{row.phone1}}</span>
                <span *ngIf="row.phone2" class="text-xs text-gray-500">{{row.phone2}}</span>
                <span *ngIf="row.phone3" class="text-xs text-gray-500">{{row.phone3}}</span>
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="client_type" *ngIf="currentRoute === 'clients'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Type </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.client_type}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="address" *ngIf="currentRoute === 'clients'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Address </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.address}} </mat-cell>
          </ng-container>

          <!-- Suppliers specific columns -->
          <ng-container matColumnDef="code" *ngIf="currentRoute === 'suppliers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Code </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-mono text-sm"> {{row.code}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="contact_name" *ngIf="currentRoute === 'suppliers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Contact </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.contact_name}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="email" *ngIf="currentRoute === 'suppliers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Email </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.email}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="country" *ngIf="currentRoute === 'suppliers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Country </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.country}} </mat-cell>
        </ng-container>

          <!-- Default columns for other routes -->
          <ng-container matColumnDef="age" *ngIf="currentRoute !== 'containers' && currentRoute !== 'items' && currentRoute !== 'clients' && currentRoute !== 'suppliers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Age </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-center"> {{row.age}} </mat-cell>
        </ng-container>

          <ng-container matColumnDef="balance" *ngIf="currentRoute !== 'containers' && currentRoute !== 'items' && currentRoute !== 'clients' && currentRoute !== 'suppliers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Balance </mat-header-cell>
            <mat-cell *matCellDef="let row" class="font-semibold text-green-600"> ${{row.balance | number:'1.2-2'}} </mat-cell>
        </ng-container>

          <ng-container matColumnDef="company" *ngIf="currentRoute !== 'containers' && currentRoute !== 'items' && currentRoute !== 'clients' && currentRoute !== 'suppliers'">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Company </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-sm"> {{row.company}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="font-semibold"> Status </mat-header-cell>
            <mat-cell *matCellDef="let row">
              <!-- Container status -->
              <span *ngIf="currentRoute === 'containers'" class="status-badge"
                [ngClass]="{
                  'bg-yellow-100 text-yellow-800': row.status === 'PENDING',
                  'bg-blue-100 text-blue-800': row.status === 'IN_TRANSIT',
                  'bg-green-100 text-green-800': row.status === 'DELIVERED',
                  'bg-red-100 text-red-800': row.status === 'CANCELLED'
                }">{{row.status}}</span>
              
              <!-- Items status -->
              <span *ngIf="currentRoute === 'items'" class="px-2 py-1 rounded-full text-xs font-medium"
                [ngClass]="{
                  'bg-green-100 text-green-800': row.status === 'IN_STOCK',
                  'bg-yellow-100 text-yellow-800': row.status === 'LOW_STOCK',
                  'bg-red-100 text-red-800': row.status === 'OUT_OF_STOCK'
                }">{{row.status}}</span>
              
              <!-- Suppliers status -->
              <span *ngIf="currentRoute === 'suppliers'" class="px-2 py-1 rounded-full text-xs font-medium"
                [ngClass]="{
                  'bg-green-100 text-green-800': row.status === 'ACTIVE',
                  'bg-red-100 text-red-800': row.status === 'INACTIVE'
                }">{{row.status}}</span>
              
              <!-- Clients status -->
              <span *ngIf="currentRoute === 'clients'" class="px-2 py-1 rounded-full text-xs font-medium"
                [ngClass]="{
                  'bg-green-100 text-green-800': row.status === 'ACTIVE',
                  'bg-red-100 text-red-800': row.status === 'INACTIVE'
                }">{{row.status}}</span>
              
              <!-- Default status for other entities -->
              <mat-chip mat-sm-chip [color]="'primary'" [selected]="row.isActive" *ngIf="currentRoute !== 'containers' && currentRoute !== 'items' && currentRoute !== 'suppliers' && currentRoute !== 'clients'">{{row.isActive ? 'active' : 'inactive'}}</mat-chip>
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef class="font-semibold"> Actions </mat-header-cell>
            <mat-cell *matCellDef="let row" class="text-center actions-cell">
              <!-- Adjust Stock Button (Items Only) -->
              <button mat-icon-button mat-sm-button color="accent" class="mr-2" 
                      *ngIf="currentRoute === 'items'" 
                      (click)="openStockAdjustment(row)" 
                      matTooltip="Adjust Stock">
                <mat-icon>inventory</mat-icon>
              </button>
              
              <button mat-icon-button mat-sm-button color="primary" class="mr-2" (click)="openPopUp(row)" matTooltip="Edit">
                <mat-icon>edit</mat-icon>
              </button>
              
              <button mat-icon-button mat-sm-button color="warn" (click)="deleteItem(row)" matTooltip="Delete">
                <mat-icon>delete</mat-icon>
              </button>
          </mat-cell>
        </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns" class="bg-gray-50"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50 border-b border-gray-200"></mat-row>
      </mat-table>
      </div>
      <mat-paginator 
        [pageSizeOptions]="[10, 25, 100]" 
        [length]="totalElements"
        [pageSize]="apiParams.pageSize"
        [pageIndex]="currentPage"
        class="border-t border-gray-200">
      </mat-paginator>
    </mat-card-content>
  </mat-card>

  <!-- Mobile Card View -->
  <div class="mobile-card-container block md:hidden space-y-4" [@animate]="{value:'*',params:{y:'50px',delay:'300ms'}}">
    <div *ngFor="let row of dataSource.data" class="mobile-card p-6">
      <!-- Container Card -->
      <div *ngIf="currentRoute === 'containers'" class="space-y-3">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="font-semibold text-lg text-gray-900">{{row.name}}</h3>
            <p class="text-sm text-gray-600 font-mono">{{row.code}}</p>
          </div>
          <span class="status-badge"
            [ngClass]="{
              'bg-yellow-100 text-yellow-800': row.status === 'PENDING',
              'bg-blue-100 text-blue-800': row.status === 'IN_TRANSIT',
              'bg-green-100 text-green-800': row.status === 'DELIVERED',
              'bg-red-100 text-red-800': row.status === 'CANCELLED'
            }">{{row.status}}</span>
        </div>
        
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div>
            <span class="text-gray-500">ID:</span>
            <span class="font-medium ml-1">{{row.id}}</span>
          </div>
          <div>
            <span class="text-gray-500">Size:</span>
            <span class="font-medium ml-1 uppercase">{{row.size || '—'}}</span>
          </div>
          <div>
            <span class="text-gray-500">Size:</span>
            <span class="font-medium ml-1">{{row.size}} ft</span>
          </div>
          <div>
            <span class="text-gray-500">CBM:</span>
            <span class="font-medium ml-1">{{row.cbm}} m³</span>
          </div>
          <div>
            <span class="text-gray-500">Shipping Agency:</span>
            <span class="font-medium ml-1">{{row.shipping_agency}}</span>
          </div>
          <div>
            <span class="text-gray-500">Price:</span>
            <span class="font-semibold text-green-600 ml-1">${{row.container_price | number:'1.2-2'}}</span>
          </div>
        </div>
        
        <div class="flex justify-end space-x-2 pt-2 border-t border-gray-200">
          <button mat-icon-button color="primary" (click)="openPopUp(row)" matTooltip="Edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteItem(row)" matTooltip="Delete">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <!-- Items Card -->
      <div *ngIf="currentRoute === 'items'" class="space-y-3">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="font-semibold text-lg text-gray-900">{{row.name}}</h3>
            <p class="text-sm text-gray-600 font-mono">{{row.code}}</p>
          </div>
          <span class="px-2 py-1 rounded-full text-xs font-medium"
            [ngClass]="{
              'bg-green-100 text-green-800': row.status === 'IN_STOCK',
              'bg-yellow-100 text-yellow-800': row.status === 'LOW_STOCK',
              'bg-red-100 text-red-800': row.status === 'OUT_OF_STOCK'
            }">{{row.status}}</span>
        </div>
        
        <!-- Pictures Section -->
        <div *ngIf="row.pictures && row.pictures.length > 0" class="mb-3">
          <div class="flex items-center space-x-2">
            <span class="text-gray-500 text-sm">Pictures:</span>
            <div class="flex space-x-1">
              <img 
                *ngFor="let picture of row.pictures; let i = index" 
                [src]="picture" 
                [alt]="row.name + ' image ' + (i + 1)"
                class="w-10 h-10 rounded object-cover border border-gray-200 cursor-pointer hover:scale-110 transition-transform"
                (click)="openImagePreview(picture, row.name)"
                matTooltip="Click to view full size"
              />
            </div>
          </div>
        </div>
        
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div>
            <span class="text-gray-500">Type:</span>
            <span class="font-medium ml-1">{{row.type}}</span>
          </div>
          <div>
            <span class="text-gray-500">Quantity:</span>
            <span class="font-medium ml-1">{{row.total_quantity}}</span>
          </div>
          <div>
            <span class="text-gray-500">Final Price:</span>
            <span class="font-semibold text-green-600 ml-1">${{row.final_price | number:'1.2-2'}}</span>
          </div>
          <div>
            <span class="text-gray-500">Min Stock:</span>
            <span class="font-medium ml-1">{{row.min_stock}}</span>
          </div>
        </div>
        
        <div class="flex justify-end space-x-2 pt-2 border-t border-gray-200">
          <button mat-icon-button color="primary" (click)="openPopUp(row)" matTooltip="Edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteItem(row)" matTooltip="Delete">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <!-- Clients Card -->
      <div *ngIf="currentRoute === 'clients'" class="space-y-3">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="font-semibold text-lg text-gray-900">{{row.name}}</h3>
            <p class="text-sm text-gray-600">{{row.email}}</p>
          </div>
          <div class="flex flex-col gap-1 items-end">
            <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">{{row.client_type}}</span>
            <span class="px-2 py-1 rounded-full text-xs font-medium"
              [ngClass]="{
                'bg-green-100 text-green-800': row.status === 'ACTIVE',
                'bg-red-100 text-red-800': row.status === 'INACTIVE'
              }">{{row.status}}</span>
          </div>
        </div>
        
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div>
            <span class="text-gray-500">Phone:</span>
            <div class="font-medium ml-1">
              <div *ngIf="row.phone1">{{row.phone1}}</div>
              <div *ngIf="row.phone2" class="text-xs">{{row.phone2}}</div>
              <div *ngIf="row.phone3" class="text-xs">{{row.phone3}}</div>
            </div>
          </div>
          <div>
            <span class="text-gray-500">Address:</span>
            <span class="font-medium ml-1">{{row.address}}</span>
          </div>
        </div>
        
        <div class="flex justify-end space-x-2 pt-2 border-t border-gray-200">
          <button mat-icon-button color="primary" (click)="openPopUp(row)" matTooltip="Edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteItem(row)" matTooltip="Delete">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <!-- Suppliers Card -->
      <div *ngIf="currentRoute === 'suppliers'" class="space-y-3">
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2">
          <div class="flex-1">
            <h3 class="font-semibold text-lg text-gray-900 break-words">{{row.name}}</h3>
            <p class="text-sm text-gray-600 font-mono">{{row.code}}</p>
          </div>
          <span class="px-2 py-1 rounded-full text-xs font-medium self-start"
            [ngClass]="{
              'bg-green-100 text-green-800': row.status === 'ACTIVE',
              'bg-red-100 text-red-800': row.status === 'INACTIVE'
            }">{{row.status}}</span>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
          <div class="flex flex-col">
            <span class="text-gray-500 text-xs">Contact:</span>
            <span class="font-medium break-words">{{row.contactName}}</span>
          </div>
          <div class="flex flex-col">
            <span class="text-gray-500 text-xs">Email:</span>
            <span class="font-medium break-words">{{row.email}}</span>
          </div>
          <div class="flex flex-col">
            <span class="text-gray-500 text-xs">Country:</span>
            <span class="font-medium">{{row.country}}</span>
          </div>
          <div class="flex flex-col">
            <span class="text-gray-500 text-xs">City:</span>
            <span class="font-medium">{{row.city}}</span>
          </div>
          <div class="flex flex-col sm:col-span-2" *ngIf="row.phone">
            <span class="text-gray-500 text-xs">Phone:</span>
            <span class="font-medium">{{row.phone}}</span>
          </div>
          <div class="flex flex-col sm:col-span-2" *ngIf="row.address">
            <span class="text-gray-500 text-xs">Address:</span>
            <span class="font-medium break-words">{{row.address}}</span>
          </div>
        </div>
        
        <div class="flex justify-end space-x-2 pt-2 border-t border-gray-200">
          <button mat-icon-button color="primary" (click)="openPopUp(row)" matTooltip="Edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteItem(row)" matTooltip="Delete">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <!-- Default Entity Card -->
      <div *ngIf="currentRoute !== 'containers' && currentRoute !== 'items' && currentRoute !== 'clients' && currentRoute !== 'suppliers'" class="space-y-3">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="font-semibold text-lg text-gray-900">{{row.name}}</h3>
            <p class="text-sm text-gray-600">{{row.company}}</p>
          </div>
          <mat-chip mat-sm-chip [color]="'primary'" [selected]="row.isActive">{{row.isActive ? 'active' : 'inactive'}}</mat-chip>
        </div>
        
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div>
            <span class="text-gray-500">Age:</span>
            <span class="font-medium ml-1">{{row.age}}</span>
          </div>
          <div>
            <span class="text-gray-500">Balance:</span>
            <span class="font-semibold text-green-600 ml-1">${{row.balance | number:'1.2-2'}}</span>
          </div>
        </div>
        
        <div class="flex justify-end space-x-2 pt-2 border-t border-gray-200">
          <button mat-icon-button color="primary" (click)="openPopUp(row)" matTooltip="Edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteItem(row)" matTooltip="Delete">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Mobile Pagination -->
    <div class="flex justify-center pt-4">
      <mat-paginator 
        [pageSizeOptions]="[5, 10, 25]" 
        [pageSize]="apiParams.pageSize"
        [length]="totalElements"
        [pageIndex]="currentPage"
        class="w-full">
      </mat-paginator>
    </div>
  </div>
</div>